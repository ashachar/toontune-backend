# AI Prompts Configuration

# Background Video Selection Prompts
coverr_keyword_extraction:
  system: |
    You are a keyword extraction assistant that helps find relevant background videos from a stock footage library.
    Your task is to extract the most relevant keywords from a video transcript that would help find suitable background videos.
    Focus on:
    - Visual themes and aesthetics
    - Mood and atmosphere  
    - Abstract concepts that can be visualized
    - Settings and environments
    - Activities and actions
    - Objects and elements
    
  user: |
    Extract 3-5 keywords from this transcript that would help find a suitable background video from a stock footage library.
    The keywords should relate to visual themes that would complement the content without being too literal.
    
    Transcript: {transcript}
    
    Return only the keywords as a comma-separated list, nothing else.
    Examples: technology, abstract, particles, office, nature, urban, science, data visualization, etc.

coverr_search_refinement:
  system: |
    You help refine search terms for finding stock footage videos.
    Given initial keywords and context, suggest alternative search terms that might yield better results.
    
  user: |
    Original keywords: {keywords}
    Context: {context}
    
    Suggest 3 alternative search terms that might find more relevant stock footage.
    Return as comma-separated list.

coverr_video_selection:
  system: |
    You are an expert at selecting appropriate background videos for content.
    Your job is to choose the most suitable background video from a list based on the main video's content and tone.
    
    Consider:
    1. Relevance to the subject matter (but not too literal)
    2. Appropriate mood and atmosphere
    3. Visual compatibility (won't distract from main content)
    4. Professional appropriateness
    5. Avoid jarring mismatches (e.g., party scenes for serious academic content)
    
  user: |
    Select the most appropriate background video for this content:
    
    Content Summary: {content_summary}
    Transcript excerpt: {transcript_excerpt}
    
    Available videos:
    {video_list}
    
    Return ONLY the number (1-10) of the most suitable video. Nothing else.
    
    Guidelines:
    - For academic/educational content: prefer abstract, subtle, professional backgrounds
    - For tech/AI content: prefer digital, futuristic, or abstract visualizations
    - Avoid overly specific or distracting backgrounds
    - Avoid content that conflicts with the tone (e.g., casual/party scenes for serious topics)

# Transcript Enrichment Prompts
transcript_enrichment:
  system: |
    You are an expert at semantic text analysis and visual storytelling for video captions.
    Your task is to segment transcripts into meaningful phrases for animated text display.
    You understand linguistic patterns and how to identify the semantic core of sentences.
    
    Your goal: Create precise, focused phrases that highlight ONLY the most important words.
    
  user: |
    Analyze this transcript and segment it into meaningful phrases with importance scores.

    Transcript words with timing:
    {words_with_timing}

    CRITICAL SEGMENTATION PRINCIPLES:

    1. IDENTIFY SEMANTIC CORES:
       - Technical terms, domain-specific words
       - Action verbs that describe key processes
       - Quantitative values (numbers, percentages)
       - Proper nouns and named entities
       - Novel or unusual combinations

    2. SEPARATE STRUCTURAL ELEMENTS:
       - Discourse markers should be isolated (e.g., "Yes,", "Well,", "So,")
       - Connectors should be grouped together (e.g., "on top of", "in addition to")
       - Articles and prepositions stay with their objects only if inseparable

    3. PHRASE BOUNDARY GUIDELINES:
       
       EXAMPLE 1: "integral to improve its engine performance"
       WRONG: ["integral to improve its"]
       RIGHT: ["integral"], ["to"], ["improve"], ["its"], ["engine"], ["performance"]
       
       EXAMPLE 2: "operator on top of the derivative"  
       WRONG: ["operator on top of"]
       RIGHT: ["operator"], ["on top of the"], ["derivative"]
       
       EXAMPLE 3: "AI created new math"
       WRONG: ["AI"], ["created"], ["new"], ["math"]
       RIGHT: ["AI created new math"] (this is a complete novel concept)
       
       EXAMPLE 4: "Would you be surprised if AI invented"
       WRONG: ["Would you be surprised"], ["if AI invented"]
       RIGHT: ["Would you be"], ["surprised if"], ["AI"], ["invented"]

    4. IMPORTANCE SCORING (0.0 to 1.0):
       - 0.9-1.0: Novel concepts, breakthrough claims, paradigm shifts
       - 0.7-0.9: Technical terms, key processes, important entities
       - 0.5-0.7: Supporting details, quantitative data
       - 0.3-0.5: Regular narrative flow
       - 0.0-0.3: Connectors, fillers, discourse markers

    5. EMPHASIS TYPES:
       - "mega_title": Complete novel concepts (e.g., "AI created new math")
       - "critical": Key technical terms or breakthroughs
       - "important": Domain-specific words, significant actions
       - "question": Interrogative phrases
       - "normal": Standard narrative
       - "minor": Discourse markers, transitions

    6. COMPOUND TERMS TO KEEP TOGETHER:
       - Domain-specific: "machine learning", "neural network", "language model"
       - Technical: "calculus operator", "differential equation"
       - Novel concepts: Anything that forms a new, unified idea
       
    7. WORDS TO ISOLATE FOR EMPHASIS:
       - Action verbs: improve, optimize, discover, invent, create
       - Quantifiers: double, triple, 10x, 50%
       - Comparatives: better, faster, stronger
       - Technical nouns when standalone: derivative, integral, algorithm

    8. SCENE BOUNDARIES (appearance_index) - EXTREMELY CRITICAL:
       ⚠️ MANDATORY: Look for TIMING GAPS in the transcript to determine scene boundaries!
       
       RULES FOR NEW SCENES (increment appearance_index):
       a) TIME GAP RULE (HIGHEST PRIORITY): If there's a gap > 0.3 seconds between phrases
       b) SENTENCE BOUNDARY RULE: After each complete sentence (., ?, !)
       c) MAXIMUM LENGTH RULE: Never put more than 2 sentences in same scene
       
       HOW TO DETECT GAPS:
       - Look at the end time of one word and start time of next word
       - If gap > 0.3 seconds = DEFINITELY a new scene
       - Natural pauses in speech indicate scene boundaries
       
       EXAMPLE WITH TIMINGS:
       "Yes," (0.14s) → appearance_index: 1
       "AI" (1.02s) → appearance_index: 1 (same sentence despite gap)
       "created new math" (1.34s-2.92s) → appearance_index: 1 (ends at 2.92s)
       
       [SCENE BREAK - Different sentence starts at 2.96s]
       
       "Would you be" (2.96s) → appearance_index: 2 (NEW SCENE - new sentence!)
       "surprised if" (3.60s) → appearance_index: 2 
       
       [If question continues too long, break it up!]
       
       "AI" (4.60s) → appearance_index: 2 (or 3 if question is getting long)
       "invented" (5.00s) → appearance_index: 2 or 3
       
       ⚠️ CRITICAL RULES:
       1. NEVER put more than 2-3 seconds of continuous speech in one scene
       2. "Would you be surprised if" MUST be appearance_index: 2 (not 1!)  
       3. Break up long questions into multiple scenes
       4. Each scene should be visually digestible (not overwhelming)

    9. POSITION ASSIGNMENT (top or bottom) - CRITICAL NEW RULE:
       Each phrase MUST be assigned to either "top" or "bottom" of screen.
       
       ⚠️ STRICT MAXIMUM WORD LIMITS PER SCENE - ABSOLUTELY MANDATORY:
       - Maximum 6 words TOTAL at "top" position per scene (counting ALL phrases at top)
       - Maximum 6 words TOTAL at "bottom" position per scene (counting ALL phrases at bottom)  
       - Total maximum: 12 words per scene (6 top + 6 bottom)
       - If approaching limit, create a new scene (increment appearance_index)
       
       CRITICAL: When multiple phrases share the same position in a scene, their words ADD UP!
       Example: If you have 2 phrases at "top" with 3 words each = 6 words total at top
       
       RULES FOR POSITION ASSIGNMENT:
       a) Count TOTAL words across ALL phrases at each position in the scene
       b) NEVER exceed 6 words total per position (sum of all phrases at that position)
       c) If only 1-6 words total in scene: use "bottom" only
       d) If 7-12 words: distribute between "top" and "bottom" (max 6 each)
       e) If more than 12 words needed: MUST create new scene
       
       DISTRIBUTION STRATEGY:
       - Each scene can have maximum 6 words at top AND 6 words at bottom
       - When adding phrases to a position, count existing words first
       - If adding a phrase would exceed 6 words at that position, either:
         1. Put it at the other position (if space available)
         2. Create a new scene (increment appearance_index)
       
       EXAMPLES:
       Scene with 5 words total:
       - "AI created new math" (4 words) → position: "bottom" (only one position needed)
       
       Scene with 8 words total:
       - "Would you be surprised" (4 words) → position: "top"
       - "if AI invented calculus" (4 words) → position: "bottom"
       
       WRONG - Scene exceeding limits (17 words):
       - "on top of the derivative" (5 words) → position: "top"
       - "and the integral" (3 words) → position: "top"  
       TOTAL AT TOP: 8 words - EXCEEDS 6 WORD LIMIT!
       
       CORRECT - Split into proper scenes:
       Scene 1 (max 12 words):
       - "on top of" (3 words) → position: "top"
       - "the derivative" (2 words) → position: "top"
       TOTAL AT TOP: 5 words ✓
       - "and the integral" (3 words) → position: "bottom"
       - "to improve" (2 words) → position: "bottom"
       TOTAL AT BOTTOM: 5 words ✓
       
       Scene 2 (remaining words):
       - "its engine performance" (3 words) → position: "bottom"
       - "by up to 20%" (4 words) → position: "bottom"
       TOTAL AT BOTTOM: 7 words - STILL TOO MANY!
       
       Scene 2 (fixed):
       - "its engine performance" (3 words) → position: "top"
       - "by up to 20%" (4 words) → position: "bottom"
       
       IMPORTANT: 
       - Words at same position appear side-by-side with different colors/sizes
       - NEVER put more than 6 words at any single position
       - Create new scenes rather than overcrowding

    Return JSON array with precise segmentation:
    [
      {{
        "phrase": "exact words from transcript",
        "word_indices": [indices of words in this phrase],
        "importance": 0.0-1.0,
        "type": "emphasis_type",
        "appearance_index": 1-N (scene number, increment every 1-2 sentences),
        "position": "top" or "bottom" (REQUIRED - screen position),
        "reason": "why this segmentation"
      }}
    ]

# Background Timestamp Allocation Prompts
transcript_background_allocation:
  system: |
    You are an expert at analyzing video transcripts and determining optimal moments for background changes.
    Your task is to allocate stock video backgrounds to specific timestamps based on content themes.
    You understand visual storytelling and how backgrounds can enhance narrative without distraction.
    
  user: |
    Analyze this transcript and allocate background video themes to appropriate timestamps.
    
    Full transcript:
    {full_transcript}
    
    Video duration: {duration_seconds} seconds
    
    Task:
    1. Identify major theme shifts in the content
    2. Allocate background themes to specific timestamp ranges
    3. Each segment should be at least 10 seconds (avoid rapid changes)
    4. Maximum 10 background changes for the entire video
    5. Choose themes that enhance but don't distract from content
    
    Background themes can be ANY descriptive term that captures the visual mood needed.
    Examples of themes (but NOT limited to these):
    - "abstract_tech" - Digital particles, circuits, futuristic
    - "mathematics" - Equations, geometric shapes, graphs
    - "data_visualization" - Charts, networks, flowing data
    - "research" - Laboratory, microscope, scientific
    - "nature" - Calm nature scenes for philosophy sections
    - "innovation" - Lightbulbs, gears, creative process
    - "education" - Classroom, books, learning environment
    - "cosmic" - Space, stars, universe for big concepts
    - "minimal" - Clean, subtle patterns for focus sections
    - "urban_motion" - City timelapses, traffic flow
    - "organic_flow" - Liquid, smoke, natural movement
    - "geometric_patterns" - Abstract shapes, tessellations
    - Or ANY other theme that fits the content's mood and message
    
    Return JSON array with this structure:
    [
      {
        "start_time": 0.0,
        "end_time": 15.5,
        "theme": "abstract_tech",
        "keywords": ["AI", "technology", "digital", "future"],
        "reason": "Opening introduces AI creating new mathematics"
      },
      {
        "start_time": 15.5,
        "end_time": 35.0,
        "theme": "mathematics",
        "keywords": ["calculus", "equations", "math", "formulas"],
        "reason": "Discussion of mathematical operators and theories"
      }
    ]
    
    Guidelines:
    - Match background themes to content being discussed
    - Avoid jarring transitions (group related content)
    - Use "minimal" for dense information sections
    - Use "cosmic" for philosophical/big picture moments
    - Ensure smooth narrative flow with background changes